<ng-container>
  <mat-toolbar color="primary">
    <button
      type="button"
      aria-label="Toggle sidenav"
      mat-icon-button
      (click)="drawer.toggle()">
      <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
    </button>
    <a [routerLink]="['/']" matTooltip="Home" class="toolbar-title">抽獎系統</a>
    <span class="toolbar-spacer"></span>
    <ng-container *ngIf="this.authService.isLoggedIn(); else notLogin">
      <button class="login-button" type="button" [matMenuTriggerFor]="menu" mat-flat-button>
        <mat-icon>account_circle</mat-icon>
        <span>{{this.authService.getUniqueName()}}</span>
      </button>
      <mat-menu #menu="matMenu">
        <button mat-menu-item (click)="this.authService.logout()">
          <mat-icon>exit_to_app</mat-icon>
          <span>登出</span>
        </button>
      </mat-menu>
    </ng-container>
    <ng-template #notLogin>
      <a [routerLink]="['/account/login']" mat-flat-button class="login-button">
        <mat-icon>account_circle</mat-icon>
        <span>登入</span>
      </a>
    </ng-template>
  </mat-toolbar>
  <mat-sidenav-container class="sidenav-container">
    <mat-sidenav #drawer class="sidenav"
        fixedInViewport="true" fixedTopGap="56"
        [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'"
        [mode]="(isHandset$ | async) ? 'push' : 'side'"
        [opened]="(isHandset$ | async) === false">
      <mat-nav-list class="sidenav-list">
        <!-- Dashboard -->
        <h3 mat-subheader>Dashboard</h3>
        <a mat-list-item routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
          <mat-icon mat-list-icon>home</mat-icon>
          <p mat-line>Home</p>
        </a>
        <ng-container *ngIf="this.authService.isLoggedIn(); else notLoginSlideNav">
          <ng-container *ngIf="this.authService.getRole() === 'Admin'">
            <!-- Account -->
            <h3 mat-subheader>Account</h3>
            <a mat-list-item routerLink="/account/register" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
              <mat-icon mat-list-icon>account_box</mat-icon>
              <p mat-line>Register</p>
            </a>
            <!-- Raffle -->
            <h3 mat-subheader>Raffle</h3>
            <a mat-list-item routerLink="/raffle" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
              <mat-icon mat-list-icon>home</mat-icon>
              <p mat-line>Home</p>
            </a>
            <!-- Start -->
            <h3 mat-subheader>Start</h3>
            <a mat-list-item routerLink="/start" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
              <mat-icon mat-list-icon>home</mat-icon>
              <p mat-line>Home</p>
            </a>
          </ng-container>
          <ng-container *ngIf="this.authService.getRole() === 'Host'">
            <!-- Raffle -->
            <h3 mat-subheader>Raffle</h3>
            <a mat-list-item routerLink="/raffle" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
              <mat-icon mat-list-icon>home</mat-icon>
              <p mat-line>Home</p>
            </a>
            <!-- Start -->
            <h3 mat-subheader>Start</h3>
            <a mat-list-item routerLink="/start" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
              <mat-icon mat-list-icon>home</mat-icon>
              <p mat-line>Home</p>
            </a>
          </ng-container>
        </ng-container>
        <ng-template #notLoginSlideNav>
          <!-- Account -->
          <h3 mat-subheader>Account</h3>
          <a mat-list-item routerLink="/account/login" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
            <mat-icon mat-list-icon>login</mat-icon>
            <p mat-line>Login</p>
          </a>
        </ng-template>
      </mat-nav-list>
    </mat-sidenav>
    <mat-sidenav-content [class]="(isHandset$ | async) ? 'sidenav-content-mobile' : 'sidenav-content-computer'">
      <router-outlet></router-outlet>
      <p>Powered by HackerSir</p>
    </mat-sidenav-content>
  </mat-sidenav-container>
</ng-container>
